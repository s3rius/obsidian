# –ö–∞–∫ —Å—Ç–∞—Ä—Ç–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç

–í —Ü–µ–ª–æ–º, –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ. –ù–∞–ø—Ä–∏–º–µ—Ä, –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ —Ö—Ä–∞–Ω–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–∫—Ä–∏–ø—Ç–æ–≤ –Ω–∞ github –∏ –±—ã—Ç—å –¥–æ–≤–æ–ª—å–Ω—ã–º, –º–æ–∂–Ω–æ –¥–æ–ø–∏—Å–∞—Ç—å –∫ –Ω–∏–º `setup.py` –∏ –≤—ã–ª–æ–∂–∏—Ç—å—Å—è –Ω–∞ pypi. –ù–æ –ª—É—á—à–∏–π —Å–ø–æ—Å–æ–± - —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç —Å `poetry`.

–ü–æ—á–µ–º—É?

–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π —É poetry –º–Ω–æ–≥–æ. –°–µ–π—á–∞—Å —Ä–∞—Å—Å–∫–∞–∂—É –ø—Ä–æ —Ç–æ, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏ —á—Ç–æ –¥–µ–ª–∞—Ç—å.

–î–ª—è –Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–¥–∏–º –ø—Ä–æ–µ–∫—Ç.

```console
$ poetry new new_proj
Created package new_proj in new_proj
$ cd new_proj
```

–î–∞–Ω–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:
```
new_proj
‚îú‚îÄ‚îÄ new_proj
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ pyproject.toml
‚îú‚îÄ‚îÄ README.rst
‚îî‚îÄ‚îÄ tests
    ‚îú‚îÄ‚îÄ __init__.py
    ‚îî‚îÄ‚îÄ test_new_proj.py
```

–≠—Ç–æ –Ω–∞—à –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç —Å –Ω–µ–±–æ–ª—å—à–∏–º–∏ –∑–∞–≥–æ—Ç–æ–≤–∫–∞–º–∏. –í —Ü–µ–ª–æ–º, —Ç—É—Ç –Ω–µ—Ç –Ω–∏—á–µ–≥–æ –Ω–µ–æ–±—ã—á–Ω–æ–≥–æ. –í–µ—Å—å –∫–æ–¥ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏/–ø—Ä–æ–µ–∫—Ç–∞ –±—É–¥–µ—Ç –≤ –ø–∞–ø–∫–µ —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º –ø—Ä–æ–µ–∫—Ç–∞. `README.rst` - –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π README. `pyproject.toml` - –º–µ—Ç–∞-–¥–∞–Ω–Ω—ã–µ –æ –ø—Ä–æ–µ–∫—Ç–µ, —Ç–∞–∫–∏–µ –∫–∞–∫: –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –æ–ø–∏—Å–∞–Ω–∏–µ, –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å—Ç–∞–Ω–æ–≤–æ—á–Ω—ã–µ –æ–ø—Ü–∏–∏ –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ. –¢—ã –º–æ–∂–µ—à—å –ø—Ä–æ—á–∏—Ç–∞—Ç—å –ø–æ–±–æ–ª—å—à–µ –æ `pyproject.toml` [—Ç—É—Ç](https://python-poetry.org/docs/pyproject/).

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å poetry

–í—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –µ—Å—Ç—å –≤ [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](https://python-poetry.org/docs) poetry. –¢—É—Ç —è —Ä–∞—Å—Å–∫–∞–∂—É –ø—Ä–æ –æ—Å–Ω–æ–≤–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã.

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏

–ß—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å
```console
$ poetry add ${dependency}
```

–î–∞–Ω–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –Ω–∞–π–¥–µ—Ç –ø–æ—Å–ª–µ–¥–Ω—é—é –Ω—É–∂–Ω—É—é –≤–µ—Ä—Å–∏—é –∏ –∑–∞–ø–∏—à–µ—Ç –µ—ë –≤ `pyproject.toml` –∏ –≤ `poetry.lock`.

–î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–ª–∏–Ω—Ç–µ—Ä—ã –Ω–∞–ø—Ä–∏–º–µ—Ä), –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ñ–ª–∞–≥ `--dev`.

```console
$ poetry add ${dependency} --dev 
```

–ß—Ç–æ–±—ã —É–¥–∞–ª–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ—Å—Ç–æ `add` –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ `remove`.

–ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã:
```console
$ poetry add loguru   
Using version ^0.5.3 for loguru  

Updating dependencies  
Resolving dependencies... (0.1s)  

Writing lock file
  
Package operations: 1 install, 0 updates, 0 removals  
¬†‚Ä¢ Installing loguru (0.5.3)
$ poetry remove loguru
Updating dependencies
Resolving dependencies... (0.1s)

Writing lock file

Package operations: 0 installs, 0 updates, 1 removal  
¬†‚Ä¢ Removing loguru (0.5.3)
```
### –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ virtualenv –¥–ª—è –≤—Ö–æ–¥–∞ –≤ –æ–±–æ–ª–æ—á–∫—É –≤—Å–µ–≥–¥–∞ –Ω–∞–¥–æ –±—ã–ª–æ –≤–≤–æ–¥–∏—Ç—å
```bash
source venv/bin/activate
```

–û–¥–Ω–∞–∫–æ —Å poetry —ç—Ç–æ –∏–∑–ª–∏—à–Ω–µ. –û–Ω —Å–∞–º —Å–æ–∑–¥–∞–µ—Ç –∏ –º–µ–Ω–µ–¥–∂–∏—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ —Å—Ä–µ–¥—ã.
–ß—Ç–æ–±—ã –≤—ã–ø–æ–ª–Ω–∏—Ç—å –æ–¥–∏–Ω–æ—á–Ω—É—é –∫–æ–º–∞–Ω–¥—É –º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å `run`. 

–ù–∞–ø—Ä–∏–º–µ—Ä:
```console
$ poetry install black --dev
Using version ^20.8b1 for black   
 ‚Ä¢ Installing appdirs (1.4.4)  
¬†‚Ä¢ Installing click (7.1.2)  
¬†‚Ä¢ Installing mypy-extensions (0.4.3)  
¬†‚Ä¢ Installing pathspec (0.8.1)  
¬†‚Ä¢ Installing regex (2020.11.13)  
¬†‚Ä¢ Installing toml (0.10.2)  
¬†‚Ä¢ Installing typed-ast (1.4.2)  
¬†‚Ä¢ Installing typing-extensions (3.7.4.3)  
¬†‚Ä¢ Installing black (20.8b1)
$ poetry run black .
reformatted new_proj/new_proj/__init__.py
reformatted new_proj/tests/test_new_proj.py
All done! ‚ú® üç∞ ‚ú®
2 files reformatted, 1 file left unchanged.
```

–î–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–æ–º–º–∞–Ω–¥ –ø–æ–¥—Ä—è–¥, –º–æ–∂–Ω–æ –≤–æ–π—Ç–∏ –≤ shell. –≠—Ç–æ –∞–Ω–∞–ª–æ–≥ `source venv/bin/activate`.

```console
$ poetry shell
Spawning shell within /home/s3rius/.cache/pypoetry/virtualenvs/new-proj-eutP4v0O-py3.9
$ black .
reformatted new_proj/new_proj/__init__.py
reformatted new_proj/tests/test_new_proj.py
All done! ‚ú® üç∞ ‚ú®
2 files reformatted, 1 file left unchanged.
```

### –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

–ú–µ–Ω—è—Ç—å –≤–µ—Ä—Å–∏–∏ –ø–∞–∫–µ—Ç–∞ –≤—Ä—É—á–Ω—É—é –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω–æ.

–£ poetry –µ—Å—Ç—å –∫–æ–µ —á—Ç–æ –¥–ª—è —Ç–µ–±—è.
```console
$ poetry version patch   
Bumping version from 0.1.0 to 0.1.1
$ poetry version preminor
Bumping version from 0.1.1 to 0.2.0-alpha.0
$ poetry version minor   
Bumping version from 0.2.0-alpha.0 to 0.2.0
$ poetry version premajor
Bumping version from 0.2.0 to 1.0.0-alpha.0
$ poetry version major   
Bumping version from 1.0.0-alpha.0 to 1.0.0
```

## pyproject.toml

–ö–∞–∫ –±—ã–ª–æ —Å–∫–∞–∑–∞–Ω–æ —Ä–∞–Ω–µ–µ, –¥–∞–Ω–Ω—ã–π —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –≤ —Å–µ–±–µ –º–µ—Ç–∞-–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–∞–∫–µ—Ç–∞.

–ü—Ä–∏–º–µ—Ä `pyproject.toml`
```toml
[tool.poetry]
name = "new_proj"
version = "0.1.0"
description = "Test library for example"
readme = "README.rst"
homepage = "https://test_url.com/"
repository = "https://github.meme/"
authors = ["Pavel Kirilin <win10@list.ru>"]

[tool.poetry.dependencies]
python = "^3.8"

[tool.poetry.dev-dependencies]
pytest = "^6.1"

[build-system]
requires = ["poetry-core>=1.0.0"]
build-backend = "poetry.core.masonry.api"
```

–î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã —É—Å—Ç–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ—Å—Ç–æ –≤–≤–µ—Å—Ç–∏
```console
$ poetry install
```

–î–∞–Ω–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ —Å–æ–∑–¥–∞—Å—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é —Å—Ä–µ–¥—É —Å–∞–º–∞ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç **–≤—Å–µ** –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏. –í–∫–ª—é—á–∞—è dev-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏. –ß—Ç–æ–±—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å `--no-dev` –∫–ª—é—á. 

## –ö–∞–∫ –ø–∞–∫–æ–≤–∞—Ç—å –∏ –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –Ω–∞ pypi
–í—Å—ë –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ.
–î–∞–≤–∞–π—Ç–µ –¥–æ–±–∞–≤–∏–º –∫–∞–∫—É—é-–Ω–∏–±—É–¥—å —Ñ—É–Ω–∫—Ü–∏—é –≤ –ø—Ä–æ–µ–∫—Ç.

```python
# new_proj/main.py
def ab_problem(a: int, b: int) -> int:
    return a + b
```

```python
# new_proj/__init.py
from new_proj.main import ab_problem

__all__ = [
    'ab_problem'
]
```

–¢–µ–ø–µ—Ä—å —Å–æ–±–µ—Ä–µ–º –ø—Ä–æ–µ–∫—Ç.

```console
$ poetry build
Building new_proj (0.1.0)
  - Building sdist
  - Built new_proj-0.1.0.tar.gz
  - Building wheel
  - Built new_proj-0.1.0-py3-none-any.whl
```

–¢–∞-–¥–∞. –≠—Ç–æ –≥–æ—Ç–æ–≤—ã–π –∫ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –Ω–∞ pypi –ø–∞–∫–µ—Ç. –õ–µ–∂–∏—Ç –æ–Ω –≤ –ø–∞–ø–∫–µ dist.

–î–∞–≤–∞–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∏–º, —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

```console
$ pip install "./dist/new_proj-0.1.0-py3-none-any.whl"  
Processing ./dist/new_proj-0.1.0-py3-none-any.whl
Installing collected packages: new-proj
Successfully installed new-proj-0.1.0

$ python
Python 3.9.1 (default, Feb  1 2021, 04:02:33) 
[GCC 10.2.0] on linux
Type "help", "copyright", "credits" or "license" for more information.
$ from new_proj import ab_problem
$ ab_problem(1,33)
34
```

–ö–∞–∫ –º–æ–∂–Ω–æ –≤–∏–¥–µ—Ç—å –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏ —Ç–µ–ø–µ—Ä—å –º—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞—à –ø–∞–∫–µ—Ç.

–î–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
```console
$ poetry publish -u "user" -p "password"
```

–ü–æ–¥—Ä–æ–±–Ω–µ–µ –º–æ–∂–Ω–æ –ø–æ—á–∏—Ç–∞—Ç—å [—Ç—É—Ç](https://python-poetry.org/docs/cli/#publish).

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
–ö–æ–Ω–µ—á–Ω–æ, —Ç–∞–∫–æ–≥–æ —Ä–æ–¥–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –≤—Å—ë —Ä–∞–≤–Ω–æ –Ω–∏–∫—É–¥–∞ –Ω–µ –≥–æ–¥–∏—Ç—å—Å—è.
–î–∞–≤–∞–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ª–∏–Ω—Ç–∏–Ω–≥.

```console
$ poetry add \
$	flake8 \
$	black \
$	isort \
$	mypy \
$	pre-commit \
$	yesqa \
$	autoflake \
$	wemake-python-styleguide --dev
---> 100%
```

–¢–µ–ø–µ—Ä—å –¥–æ–±–∞–≤–∏–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞.
–≠—Ç–æ –º–æ–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ —è –Ω–∞—Å—Ç—Ä–æ–∏–ª –ø–æ–¥ —Å–µ–±—è, –º–æ–∂–µ—à—å –º–µ–Ω—è—Ç—å –∏—Ö –∫–∞–∫ —Ö–æ—á–µ—à—å.

`.mypy.ini` –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤.
```ini
[mypy]
strict = True
ignore_missing_imports=True
allow_subclassing_any=True
allow_untyped_calls=True
pretty=True
show_error_codes=True
implicit_reexport=True
allow_untyped_decorators=True
```

`.isort.cfg` –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –∏–º–ø–æ—Ä—Ç–æ–≤.
```ini
[isort]
multi_line_output = 3
include_trailing_comma = true
use_parentheses = true
```

`.flake8` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ª–∏–Ω—Ç–∏–Ω–≥–∞. –¢—É—Ç –¥–æ–≤–æ–ª—å–Ω–æ –º–Ω–æ–≥–æ. –≠—Ç–æ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ–Ω—É–∂–Ω—ã—Ö –∫–æ–¥–æ–≤ –æ—à–∏–±–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –æ—Å–æ–±–æ-—Ç–æ –∏ –æ—à–∏–±–∫–∏.
```ini
[flake8]
max-complexity = 6
inline-quotes = double
max-line-length = 88
extend-ignore = E203
docstring_style=sphinx

ignore =
  ; Found `f` string
  WPS305,
  ; Missing docstring in public module
  D100,
  ; Missing docstring in magic method
  D105,
  ; Missing docstring in __init__
  D107,
  ; Found class without a base class
  WPS306,
  ; Missing docstring in public nested class
  D106,
  ; First line should be in imperative mood
  D401,
  ; Found `__init__.py` module with logic
  WPS412,
  ; Found implicit string concatenation
  WPS326,
  ; Found string constant over-use
  WPS226,
  ; Found upper-case constant in a class
  WPS115,
  ; Found nested function
  WPS430,
  ; Found using `@staticmethod`
  WPS602,
  ; Found method without arguments
  WPS605,
  ; Found overused expression
  WPS204,
  ; Found too many module members
  WPS202,
  ; Found too high module cognitive complexity
  WPS232,
  ; line break before binary operator
  W503,
  ; Found module with too many imports
  WPS201,
  ; Found vague import that may cause confusion: X
  WPS347,
  ; Inline strong start-string without end-string.
  RST210,
  ; subprocess call with shell=True seems safe, but may be changed in the future.
  S602,
  ; Starting a process with a partial executable path.
  S607,
  ; Consider possible security implications associated with subprocess module.
  S404,
  ; Found nested class
  WPS431,
  ; Found wrong module name
  WPS100,
  ; Found too many methods
  WPS214,
  ; Found too long ``try`` body
  WPS229,
  ; Found function with too much cognitive complexity
  WPS231,
  
  ; all init files
  __init__.py:
  ; ignore not used imports
  F401,
  ; ignore import with wildcard
  F403,
  ; Found wrong metadata variable
  WPS410,

per-file-ignores =
  ; all tests
  test_*.py,tests.py,tests_*.py,*/tests/*:
  ; Use of assert detected
  S101,

exclude =
  ./.git,
  ./venv,
  ./cached_venv,
  ./var,
```

`.pre-commit-config.yaml` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏ —Ö—É–∫–æ–≤ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ—Ö –ª–∏–Ω—Ç–µ—Ä–æ–≤ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º.
```yaml
# See https://pre-commit.com for more information
# See https://pre-commit.com/hooks.html for more hooks
repos:
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v2.4.0
    hooks:
      - id: check-ast
      - id: trailing-whitespace
      - id: check-toml
      - id: end-of-file-fixer

  - repo: https://github.com/asottile/add-trailing-comma
    rev: v2.1.0
    hooks:
    -   id: add-trailing-comma

  - repo: local
    hooks:
      - id: black
        name: Format with Black
        entry: black
        language: system
        types: [python]

      - id: autoflake
        name: autoflake
        entry: autoflake
        language: system
        types: [ python ]
        args: [ --in-place, --remove-all-unused-imports, --remove-duplicate-keys ]

      - id: isort
        name: isort
        entry: isort
        language: system
        types: [ python ]

      - id: flake8
        name: Check with Flake8
        entry: flake8
        language: system
        pass_filenames: false
        types: [ python ]
        args: [--count, .]

      - id: mypy
        name: Validate types with MyPy
        entry: mypy
        language: system
        types: [ python ]

      - id: yesqa
        name: Remove usless noqa
        entry: yesqa
        language: system
        types: [ python ]

      - id: pytest
        name: pytest
        entry: pytest
        language: system
        pass_filenames: false
        types: [ python ]
```

–ò –Ω–µ –∑–∞–±—ã–≤–∞–µ–º –ø—Ä–æ `.gitignore`. –ï–≥–æ –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ [—Ç—É—Ç](https://github.com/github/gitignore/blob/master/Python.gitignore).

–û–ù –ù–ï–û–ë–•–û–î–ò–ú –ß–¢–û–ë–´ pre-commit –†–ê–ë–û–¢–õ –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–û –ö–û–†–†–ï–ö–¢–ù–û.

–¢–µ–ø–µ—Ä—å —É—Å—Ç–∞–Ω–æ–≤–∏–º —Ö—É–∫–∏ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.
```console
$ git init
Initialized empty Git repository in .git/
$ poetry shell
$ pre-commit install
pre-commit installed at .git/hooks/pre-commit
$ git commit
... # –£–ø–∞–¥–µ—Ç —Å –∫—É—á–µ–π –æ—à–∏–±–æ–∫
```

–¢–µ–ø–µ—Ä—å –ø–æ–ø—Ä–∞–≤–∏–º –≤—Å–µ –≤–æ–∑–Ω–∏–∫—à–∏–µ –ø—Ä–æ–±–ª–µ–º—ã.

–í–æ –ø–µ—Ä–≤—ã—Ö –∏—Å–ø—Ä–∞–≤–∏–º —Ç–µ—Å—Ç—ã.

–í `tests/test_new_proj.py` –Ω–∞–ø–∏—à–µ–º —Å–ª–µ–¥—É—é—â–µ–µ:
```python
from new_proj import ab_problem


def test_ab() -> None:
    """AB problecm success case."""
    assert ab_problem(1, 2) == 3
```

–î–æ–±–∞–≤–∏–º –æ–ø–∏—Å–∞–Ω–∏—è –≤ `__init__` —Ñ–∞–π–ª—ã.

`tests/__init__.py`:
```python
"""Tests for new_proj."""
```

`new_proj/__init__.py`:
```python
"""Project for solving ab problem."""
from new_proj.main import ab_problem

__all__ = [
    "ab_problem",
]
```

–ü–æ—Ñ–∏–∫—Å–∏–º –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –ø—Ä–æ–µ–∫—Ç–∞.

`new_proj/main.py`:
```python
def ab_problem(first: int, second: int) -> int:
    """
    Solve AB problem.

    The function sums two integers.

    :param first: a argument.
    :param second: b argument.
    :returns: sum.
    """
    return first + second
```

–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ —Å–¥–µ–ª–∞—Ç—å —Å–≤–æ–π –ø–µ—Ä–≤—ã–π –∫–æ–º–º–∏—Ç.

```console
$ git commit     
Check python ast................Passed
Trim Trailing Whitespace........Passed
Check Toml......................Passed
Fix End of Files................Passed
Add trailing commas.............Passed
Format with Black...............Passed
autoflake.......................Passed
isort...........................Passed
Check with Flake8...............Passed
Validate types with MyPy........Passed
Remove usless noqa..............Passed
pytest..........................Passed
```

–¢–µ–ø–µ—Ä—å —Ç—ã –∑–Ω–∞–µ—à—å –∫–∞–∫ —Å–æ–∑–¥–∞–≤–∞—Ç—å —à–µ–¥–µ–≤—Ä—ã.
# –°–æ–∑–¥–∞–Ω–∏–µ CLI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
–ê —á—Ç–æ –µ—Å–ª–∏ —è —Ö–æ—á—É cli-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ?
–¢—ã –Ω–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—à—å –Ω–∞—Å–∫–æ–ª—å–∫–æ —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ.

–ü–æ–π–¥–µ–º –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ–º –Ω–∞—à –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª.

```python
import argparse


def parse_args() -> argparse.Namespace:
    """
    Parse CLI arguments.

    :returns: parsed namespace.
    """
    parser = argparse.ArgumentParser()

    parser.add_argument("a", type=int)
    parser.add_argument("b", type=int)

    return parser.parse_args()


def ab_problem(first: int, second: int) -> int:
    """
    Solve AB problem.

    The function sums two integers.

    :param first: a argument.
    :param second: b argument.
    :returns: sum.
    """
    return first + second


def main() -> None:
    """Main function."""
    args = parse_args()
    print(ab_problem(args.a, args.b))  # noqa: WPS421

```

–¢–µ–ø–µ—Ä—å –ø–æ–ø—Ä–∞–≤–∏–º pyproject.toml —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º —á—Ç–æ–±—ã –æ–Ω —Å–æ–∑–¥–∞–ª cli –¥–ª—è –Ω–∞—à–µ–π —Ñ—É–Ω–∫—Ü–∏–∏.

–î–æ–±–∞–≤–∏–º —Å–ª–µ–¥—É—é—â—É—é —Å–µ–∫—Ü–∏—é –∫—É–¥–∞-–Ω–∏–±—É–¥—å –≤ `pyproject.toml`:
```toml
[tool.poetry.scripts]
ab_solver = "new_proj.main:main"
```

–¢–µ–ø–µ—Ä—å –Ω–∞–º –¥–æ—Å—Ç—É–ø–Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞ `ab_solver` –≤–Ω—É—Ç—Ä–∏ shell.

```console
$ poetry install
$ poetry shell
$ ab_solver 1 2
3
```

–•–æ—á–µ—à—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å? –ü–æ–∂–∞–ª—É–π—Å—Ç–∞.
```console
$ poetry build
Building new_proj (0.1.0)
  - Building sdist
  - Built new_proj-0.1.0.tar.gz
  - Building wheel
  - Built new_proj-0.1.0-py3-none-any.whl
$ pip install "./dist/new_proj-0.1.0-py3-none-any.whl"
Processing ./dist/new_proj-0.1.0-py3-none-any.whl
Installing collected packages: new-proj
Successfully installed new-proj-0.1.0
$ ab_solver 1 2                                     
3
```

–ï—Å–ª–∏ –∑–∞–ø–∞–±–ª–∏—à–∏—Ç—å –ø—Ä–æ–µ–∫—Ç, —Ç–æ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ç–æ–∂–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤–∞—à–∞ cli-–ø—Ä–æ–≥—Ä–∞–º–º–∞.